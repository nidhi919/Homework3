---
import { app } from '../firebase/server'
import { getAuth } from 'firebase-admin/auth'
import Layout from '../layouts/Layout.astro'
import App from '../components/App'
const auth = getAuth(app)

// TODO Check if the user has an active session
// HINT: See index.astro for a reference on how to do this
// If not, redirect the user to the signin page
// Your code here

// TODO Retrieve the session cookie and verify it
// Use Firebase verifySessionCookie method to verify the session cookie
// Your code here

// Get the user details from the decoded cookie
const user = await auth.getUser(decodedCookie.uid)

// TODO If the user is not found, redirect the user to the signin page
// Your code here
---

<Layout title="dashboard">
    <App client:only="react" />
</Layout>
